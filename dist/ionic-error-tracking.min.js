function getScriptElement(){for(var e=document.querySelectorAll("script"),n=0;n<e.length;n++){var t=e[n];if(t.src.indexOf("ionic-error-tracking")>=0)return t}}function getAppId(){var e=ourScriptElement;return e&&e.getAttribute("data-app-id")}function getIsDevMode(){var e=ourScriptElement;return e&&"true"===e.getAttribute("data-dev")}function getProvidedCodeVersion(){var e=ourScriptElement;return e&&e.getAttribute("data-app-version")}function getApiUrl(){return getIsDevMode()?"http://localhost:7000":"https://api.ionicjs.com"}function handleError(e){(e=cleanError(e))&&(queue.push(e),timerId||(timerId=setTimeout(function(){drainQueue()},2e3)))}function handleNewError(e){window.TraceKit.report(e)}function cleanError(e){var n=window.TraceKit.computeStackTrace(e);e.stack=n,(e.url||e.headers)&&(e.isHttp=!0),e.timestamp=new Date;for(var t=e.stack,r=0,i=t;r<i.length;r++){var o=i[r];o.context=null,delete o.context}return e}function drainQueue(){clearTimeout(timerId),timerId=null;var e=window.angular?"angular1":"angular2",n={app_id:appId,framework:e,device:deviceInfo,errors:queue.slice()};console.log("Sending errors to server",n),window.fetch(apiUrl+"/monitoring/"+appId+"/exceptions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).catch(function(e){console.error("Unable to send exception to server",e)}),queue.length=0}function getBrowserInfo(){var e=window.navigator;return{browserProduct:e.product,browserAppVersion:e.appVersion,browserUserAgent:e.userAgent,browserPlatform:e.platform,browserLanguage:e.language,browserAppName:e.appName,browserAppCodeName:e.appCodeName,viewportWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),viewportHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),utcOffset:-((new Date).getTimezoneOffset()/60)}}function getDeviceInfo(){return new Promise(function(e,n){var t={version:codeVersion},r=window.device;if(r&&(t={model:r.model,platform:r.platform,uuid:r.uuid,osVersion:r.version,serial:r.serial,manufacturer:r.manufacturer,isNative:!0}),Object.assign(t,getBrowserInfo()),!window.IonicCordovaCommon)return e(t);console.error("the ionic-cordova-common plugin is not installed. Source Mapping will not work for exceptions. Make sure to install this plugin for full exception reporting"),window.IonicCordovaCommon.getAppInfo(function(n){var r=Object.assign(t,n);e(r)},function(e){n(e)})})}!function(e,n){function t(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function r(e){return void 0===e}if(e){var i={},o=e.TraceKit,c=[].slice,l="?";i.noConflict=function(){return e.TraceKit=o,i},i.wrap=function(e){function n(){try{return e.apply(this,arguments)}catch(e){throw i.report(e),e}}return n},i.report=function(){function n(e){u(),p.push(e)}function r(e){for(var n=p.length-1;n>=0;--n)p[n]===e&&p.splice(n,1)}function o(e,n){var r=null;if(!n||i.collectWindowErrors){for(var o in p)if(t(p,o))try{p[o].apply(null,[e].concat(c.call(arguments,2)))}catch(e){r=e}if(r)throw r}}function l(e,n,t,r,c){var l=null;if(h)i.computeStackTrace.augmentStackTraceWithInitialElement(h,n,t,e),a();else if(c)l=i.computeStackTrace(c),o(l,!0);else{var u={url:n,line:t,column:r};u.func=i.computeStackTrace.guessFunctionName(u.url,u.line),u.context=i.computeStackTrace.gatherContext(u.url,u.line),l={mode:"onerror",message:e,stack:[u]},o(l,!0)}return!!f&&f.apply(this,arguments)}function u(){d!==!0&&(f=e.onerror,e.onerror=l,d=!0)}function a(){var e=h,n=m;m=null,h=null,g=null,o.apply(null,[e,!1].concat(n))}function s(n){if(h){if(g===n)return;a()}var t=i.computeStackTrace(n);throw h=t,g=n,m=c.call(arguments,1),e.setTimeout(function(){g===n&&a()},t.incomplete?2e3:0),n}var f,d,p=[],m=null,g=null,h=null;return s.subscribe=n,s.unsubscribe=r,s}(),i.computeStackTrace=function(){function n(n){if(!i.remoteFetching)return"";try{var t=function(){try{return new e.XMLHttpRequest}catch(n){return new e.ActiveXObject("Microsoft.XMLHTTP")}}();return t.open("GET",n,!1),t.send(""),t.responseText}catch(e){return""}}function o(r){if("string"!=typeof r)return[];if(!t(k,r)){var i="",o="";try{o=e.document.domain}catch(e){}var c=/(.*)\:\/\/([^:\/]+)([:\d]*)\/{0,1}([\s\S]*)/.exec(r);c&&c[2]===o&&(i=n(r)),k[r]=i?i.split("\n"):[]}return k[r]}function c(e,n){var t,i=/function ([^(]*)\(([^)]*)\)/,c=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,u="",a=o(e);if(!a.length)return l;for(var s=0;s<10;++s)if(u=a[n-s]+u,!r(u)){if(t=c.exec(u))return t[1];if(t=i.exec(u))return t[1]}return l}function u(e,n){var t=o(e);if(!t.length)return null;var c=[],l=Math.floor(i.linesOfContext/2),u=l+i.linesOfContext%2,a=Math.max(0,n-l-1),s=Math.min(t.length,n+u-1);n-=1;for(var f=a;f<s;++f)r(t[f])||c.push(t[f]);return c.length>0?c:null}function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function s(e){return a(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function f(e,n){for(var t,r,i=0,c=n.length;i<c;++i)if((t=o(n[i])).length&&(t=t.join("\n"),r=e.exec(t)))return{url:n[i],line:t.substring(0,r.index).split("\n").length,column:r.index-t.lastIndexOf("\n",r.index)-1};return null}function d(e,n,t){var r,i=o(n),c=new RegExp("\\b"+a(e)+"\\b");return t-=1,i&&i.length>t&&(r=c.exec(i[t]))?r.index:null}function p(n){if(!r(e&&e.document)){for(var t,i,o,c,l=[e.location.href],u=e.document.getElementsByTagName("script"),d=""+n,p=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,m=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,g=0;g<u.length;++g){var h=u[g];h.src&&l.push(h.src)}if(o=p.exec(d)){var v=o[1]?"\\s+"+o[1]:"",w=o[2].split(",").join("\\s*,\\s*");t=a(o[3]).replace(/;$/,";?"),i=new RegExp("function"+v+"\\s*\\(\\s*"+w+"\\s*\\)\\s*{\\s*"+t+"\\s*}")}else i=new RegExp(a(d).replace(/\s+/g,"\\s+"));if(c=f(i,l))return c;if(o=m.exec(d)){var x=o[1];if(t=s(o[2]),i=new RegExp("on"+x+"=[\\'\"]\\s*"+t+"\\s*[\\'\"]","i"),c=f(i,l[0]))return c;if(i=new RegExp(t),c=f(i,l))return c}return null}}function m(e){if(!e.stack)return null;for(var n,t,i=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|webpack|eval).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,o=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,a=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,s=e.stack.split("\n"),f=[],p=/^(.*) is undefined$/.exec(e.message),m=0,g=s.length;m<g;++m){if(n=i.exec(s[m])){var h=n[2]&&n[2].indexOf("native")!==-1;t={url:h?null:n[2],func:n[1]||l,args:h?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=a.exec(s[m]))t={url:n[2],func:n[1]||l,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=o.exec(s[m])))continue;t={url:n[3],func:n[1]||l,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!t.func&&t.line&&(t.func=c(t.url,t.line)),t.line&&(t.context=u(t.url,t.line)),f.push(t)}return f.length?(f[0]&&f[0].line&&!f[0].column&&p?f[0].column=d(p[1],f[0].url,f[0].line):f[0].column||r(e.columnNumber)||(f[0].column=e.columnNumber+1),{mode:"stack",name:e.name,message:e.message,stack:f}):null}function g(e){var n=e.stacktrace;if(n){for(var t,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,o=n.split("\n"),l=[],a=0;a<o.length;a+=2){var s=null;if((t=r.exec(o[a]))?s={url:t[2],line:+t[1],column:null,func:t[3],args:[]}:(t=i.exec(o[a]))&&(s={url:t[6],line:+t[1],column:+t[2],func:t[3]||t[4],args:t[5]?t[5].split(","):[]}),s){if(!s.func&&s.line&&(s.func=c(s.url,s.line)),s.line)try{s.context=u(s.url,s.line)}catch(e){}s.context||(s.context=[o[a+1]]),l.push(s)}}return l.length?{mode:"stacktrace",name:e.name,message:e.message,stack:l}:null}}function h(n){var r=n.message.split("\n");if(r.length<4)return null;var i,l=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,a=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,d=/^\s*Line (\d+) of function script\s*$/i,p=[],m=e&&e.document&&e.document.getElementsByTagName("script"),g=[];for(var h in m)t(m,h)&&!m[h].src&&g.push(m[h]);for(var v=2;v<r.length;v+=2){var w=null;if(i=l.exec(r[v]))w={url:i[2],func:i[3],args:[],line:+i[1],column:null};else if(i=a.exec(r[v])){w={url:i[3],func:i[4],args:[],line:+i[1],column:null};var x=+i[1],b=g[i[2]-1];if(b){var E=o(w.url);if(E){E=E.join("\n");var k=E.indexOf(b.innerText);k>=0&&(w.line=x+E.substring(0,k).split("\n").length)}}}else if(i=d.exec(r[v])){var y=e.location.href.replace(/#.*$/,""),I=new RegExp(s(r[v+1])),S=f(I,[y]);w={url:y,func:"",args:[],line:S?S.line:i[1],column:null}}if(w){w.func||(w.func=c(w.url,w.line));var T=u(w.url,w.line),$=T?T[Math.floor(T.length/2)]:null;T&&$.replace(/^\s*/,"")===r[v+1].replace(/^\s*/,"")?w.context=T:w.context=[r[v+1]],p.push(w)}}return p.length?{mode:"multiline",name:n.name,message:r[0],stack:p}:null}function v(e,n,t,r){var i={url:n,line:t};if(i.url&&i.line){e.incomplete=!1,i.func||(i.func=c(i.url,i.line)),i.context||(i.context=u(i.url,i.line));var o=/ '([^']+)' /.exec(r);if(o&&(i.column=d(o[1],i.url,i.line)),e.stack.length>0&&e.stack[0].url===i.url){if(e.stack[0].line===i.line)return!1;if(!e.stack[0].line&&e.stack[0].func===i.func)return e.stack[0].line=i.line,e.stack[0].context=i.context,!1}return e.stack.unshift(i),e.partial=!0,!0}return e.incomplete=!0,!1}function w(e,n){for(var t,r,o,u=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,a=[],s={},f=!1,m=w.caller;m&&!f;m=m.caller)if(m!==x&&m!==i.report){if(r={url:null,func:l,args:[],line:null,column:null},m.name?r.func=m.name:(t=u.exec(m.toString()))&&(r.func=t[1]),void 0===r.func)try{r.func=t.input.substring(0,t.input.indexOf("{"))}catch(e){}if(o=p(m)){r.url=o.url,r.line=o.line,r.func===l&&(r.func=c(r.url,r.line));var g=/ '([^']+)' /.exec(e.message||e.description);g&&(r.column=d(g[1],o.url,o.line))}s[""+m]?f=!0:s[""+m]=!0,a.push(r)}n&&a.splice(0,n);var h={mode:"callers",name:e.name,message:e.message,stack:a};return v(h,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),h}function x(e,n){var t=null;n=null==n?0:+n;try{if(t=g(e))return t}catch(e){if(E)throw e}try{if(t=m(e))return t}catch(e){if(E)throw e}try{if(t=h(e))return t}catch(e){if(E)throw e}try{if(t=w(e,n+1))return t}catch(e){if(E)throw e}return{mode:"failed"}}function b(e){e=1+(null==e?0:+e);try{throw new Error}catch(n){return x(n,e+1)}}var E=!1,k={};return x.augmentStackTraceWithInitialElement=v,x.guessFunctionName=c,x.gatherContext=u,x.ofCaller=b,x.getSource=o,x}(),i.extendToAsynchronousCallbacks=function(){var n=function(n){var t=e[n];e[n]=function(){var e=c.call(arguments),n=e[0];return"function"==typeof n&&(e[0]=i.wrap(n)),t.apply?t.apply(this,e):t(e[0],e[1])}};n("setTimeout"),n("setInterval")},i.remoteFetching||(i.remoteFetching=!0),i.collectWindowErrors||(i.collectWindowErrors=!0),(!i.linesOfContext||i.linesOfContext<1)&&(i.linesOfContext=11),"undefined"!=typeof module&&module.exports&&e.module!==module?module.exports=i:"function"==typeof define&&define.amd?define("TraceKit",[],i):e.TraceKit=i}}("undefined"!=typeof window?window:global),Object.defineProperty(exports,"__esModule",{value:!0});var ionic=window.Ionic=window.Ionic||{},ourScriptElement=getScriptElement(),queue=[],timerId,deviceInfo=getBrowserInfo(),appId=getAppId(),devMode=getIsDevMode(),codeVersion=getProvidedCodeVersion(),apiUrl=getApiUrl();console.log("Ionic Error Logging - App: ",appId," Dev mode?",devMode),window.cordova?document.addEventListener("deviceready",function(){getDeviceInfo().then(function(e){deviceInfo=e})}):window.addEventListener("load",function(){getDeviceInfo().then(function(e){deviceInfo=e})}),window.TraceKit.remoteFetching=!1,window.TraceKit.report.subscribe(function(e){handleError(e)}),exports.handleError=handleError,exports.handleNewError=handleNewError,ionic.handleError=handleError,ionic.handleNewError=handleNewError,window.angular&&window.angular.module("ionic").config(["$provide",function(e){e.decorator("$exceptionHandler",["$delegate",function(e){return function(n,t){e(n,t),n.message=n.stack,window.Ionic.handleNewError(n)}}])}]);